#How to use?
![Screenshot](https://raw.github.com/tatou-tatou/dotfiles/master/.panel/Previews/pixeldots.gif)

You will need [bar-aint-recursive](https://github.com/LemonBoy/bar) (for the panel) and [dzen](https://github.com/robm/dzen) (for the popups).

Put those files in your $PATH. Sometimes, it might need a script I put in `~/.bin`, so look for it in the appropriate [place](https://github.com/tatou-tatou/dotfiles/tree/master/.bin).

There's an **issue** (or a design choice, I don't know) with *bar* preventing from having more than ten clickable areas at the same time. I just increased the value of `N` in the *bar* source from 10 to 20, and it increased the limit somehow.

As I am not a developer and do not plan to be one, I don't really know C except for some very basic things, so no precise idea why it works, what are the consequences and why `N` was equal to 10 in the first place. Maybe it was a very bad idea to change that, but I don't really have the time to care right now. If you care, go bug LemonBoy, or take a look by yourself.


##Panel
`panel` starts the panel and creates the panel fifo.

`panel-skeleton` interprets where to put each information that is piped to the fifo.

`panel-settings` contains various settings, like the colors. It is loaded by the other scripts.

All the special characters (icons...) are custom made. You will need the *MonteCarloPanel* and *MonteCarloMedium* fonts from my Mon√©gasque repo, or add the characters yourself to your font of choice.

If you want to use your own font with your own glyphs, just know that I had some issues with vertical alignment. I fixed it by duplicating my font and changing some of its properties (namely SIZE, PIXEL_SIZE and FONT_DESCENT) to align it properly. That's why I have both a *MonteCarloMedium* font and a *MonteCarloPanel* font, the latter being dedicated to the panel.

##Notifications
![Screenshot](https://raw.github.com/tatou-tatou/dotfiles/master/.panel/Previews/notstat.gif)

The music notification on the left of the panel is generated by *not-stat*, a shell script inspired by [statnot](https://github.com/halhen/statnot).

It will display a notification in the panel and show the music again if there is no new notifications during three seconds.

You call it like this:

    pkill not-stat ; not-stat -<x>

**Do not forget** to kill the *not-stat* process before calling it, else the three seconds wait will not work properly.


###With mpdcron
On each song change or mpd event (like play/pause), [mpdcron](https://bbs.archlinux.org/viewtopic.php?pid=1354247) will execute the following:

    pkill not-stat ; not-stat -m &


###With sxhkd
It's also bound to keybinds, for example:

    XF86AudioRaiseVolume
     amixer set PCM 1dB+ ; pkill not-stat ; not-stat -v

With those lines in your sxhkdrc, pressing the *XF86AudioRaiseVolume* will raise the PCM channel volume by 1 decibel, display the new volume value and show the music status again after three seconds of inactivity.

Read my `sxhkdrc` if you want other examples.

###With buttons
The script is also called when clicking on various buttons or when using the different sliders.

###Misc.
The notification is clickable: click on the blue icon to spawn the pink buttons, and click on the label to toggle play/pause in mpd.




##Clickable panel buttons
The pink buttons menu is generated by `panel-monitor`, and the stand-alone music controller is made by `panel-music_control`.

Click on it to know what each button does, it's not really complicated.

You might want to change `mpc-script prev` by `mpc prev` (or just grab the currently unfinished `mpc-script` from my `~/.bin`).


##Dzen popup
`dzen-submenu-window`creates the window and the fifo used by the sliders.

`dzen-submenu-content` creates the actual content of the popup, like the sliders.

**Do not forget** to create `~/.panel/PID/dzen-submenu.pid`, else a few things will not work (like closing it properly or moving the indicator through other means than clicking on the slider).

###Sound
Should work out of the box. I just use the CLI tools that come with ALSA to get and change the volume of the Master and PCM channels.

###Brightness
To draw the slider, it reads the current screen brightness value in `/sys/<...>/backlight/<...>/brightness` and its max value in `/sys/<...>/backlight/<...>/max_brightness`.

The path to those files probably won't be the same on our respective systems, so edit this in the `panel-settings`.

The same for the script I use to change the backlight, you will need to adapt it to your system.

###Music
It provides shortcuts to launch [mpdviz](https://github.com/neeee/mpdviz), *ncmpcpp* and my [coverart](https://github.com/tatou-tatou/dotfiles/blob/master/.bin/coverart) script.

##Start Menu
The start menu was made with `mygtkmenu`.

##Mails
`panel-mail` is called by cron after it fetches mails:

    0 * * * * /usr/bin/getmail --rcfile mailbox1 --rcfile mailbox2 ; /home/tatou/.bin/panel-mail

You should also make an alias so it's called when you close mutt:

    alias mutt='mutt ; panel-mail'

In the panel, you can click on the icon to hide the number of unread mails.

##Calendar
Found it on Twily's [website](http://www.twily.info), tweaked it a little.

If you click on the date in the panel, the calendar will pop. If you click again on the date, it will disappear.

Do not forget to create `~/.panel/PID/calendar.pid`, else the above behavior will not happen.
